From 29b2fae90c56dad0e5814134cc24a4be8cc7575b Mon Sep 17 00:00:00 2001
From: nian0114 <268078545@qq.com>
Date: Sat, 3 Dec 2016 11:27:06 +0800
Subject: [PATCH 1/3] fix phone fc

---
 TeleService/smali/com/android/phone/PhoneGlobals.smali | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

--- a/TeleService/smali/com/android/phone/PhoneGlobals.smali
+++ b/TeleService/smali/com/android/phone/PhoneGlobals.smali
@@ -757,7 +757,19 @@

     if-nez v10, :cond_2

-    invoke-static {p0}, Lcom/android/internal/telephony/PhoneFactory;->makeDefaultPhones(Landroid/content/Context;)V
+    const-class v10, Lcom/qti/internal/telephony/QtiTelephonyPlugin;
+
+    invoke-virtual {v10}, Ljava/lang/Class;->getClassLoader()Ljava/lang/ClassLoader;
+
+    move-result-object v10
+
+    invoke-static {p0, v10}, Lcom/android/internal/telephony/TelephonyPluginDelegate;->init(Landroid/content/Context;Ljava/lang/ClassLoader;)V
+
+    invoke-static {}, Lcom/android/internal/telephony/TelephonyPluginDelegate;->getInstance()Lcom/android/internal/telephony/TelephonyPluginDelegate;
+
+    move-result-object v10
+
+    invoke-virtual {v10, p0}, Lcom/android/internal/telephony/TelephonyPluginDelegate;->makeDefaultPhones(Landroid/content/Context;)V

     new-instance v5, Landroid/content/Intent;

--
2.10.1
